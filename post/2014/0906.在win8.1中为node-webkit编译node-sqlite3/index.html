<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>在win8.1中为node-webkit编译node-sqlite3 - ZEN</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="夏末" />
  <meta name="description" content="安装nodejs 本文nodejs版本0.10.31 下载node-webkit https://github.com/rogerwang/node-webkit#downloads If your native Node module works only with Node v0.10, then you should use node-webkit v0.8.x, which is also a maintained branch. 下载0.8.6版 安" />

  <meta name="keywords" content="blog, evolution" />






<meta name="generator" content="Hugo 0.46" />


<link rel="canonical" href="https://cethink.gitee.io/evolution/post/2014/0906.%E5%9C%A8win8.1%E4%B8%AD%E4%B8%BAnode-webkit%E7%BC%96%E8%AF%91node-sqlite3/" />

<link rel="apple-touch-icon" sizes="180x180" href="/evolution/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/evolution/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/evolution/favicon-16x16.png">
<link rel="manifest" href="/evolution/manifest.json">
<link rel="mask-icon" href="/evolution/safari-pinned-tab.svg" color="#5bbad5">







<link href="/evolution/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/evolution/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="在win8.1中为node-webkit编译node-sqlite3" />
<meta property="og:description" content="安装nodejs 本文nodejs版本0.10.31 下载node-webkit https://github.com/rogerwang/node-webkit#downloads If your native Node module works only with Node v0.10, then you should use node-webkit v0.8.x, which is also a maintained branch. 下载0.8.6版 安" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cethink.gitee.io/evolution/post/2014/0906.%E5%9C%A8win8.1%E4%B8%AD%E4%B8%BAnode-webkit%E7%BC%96%E8%AF%91node-sqlite3/" />



<meta property="article:published_time" content="2014-09-06T18:34:48&#43;08:00"/>

<meta property="article:modified_time" content="2014-09-06T18:34:48&#43;08:00"/>











<meta itemprop="name" content="在win8.1中为node-webkit编译node-sqlite3">
<meta itemprop="description" content="安装nodejs 本文nodejs版本0.10.31 下载node-webkit https://github.com/rogerwang/node-webkit#downloads If your native Node module works only with Node v0.10, then you should use node-webkit v0.8.x, which is also a maintained branch. 下载0.8.6版 安">


<meta itemprop="datePublished" content="2014-09-06T18:34:48&#43;08:00" />
<meta itemprop="dateModified" content="2014-09-06T18:34:48&#43;08:00" />
<meta itemprop="wordCount" content="652">



<meta itemprop="keywords" content="node-sqlite3,node-webkit," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="在win8.1中为node-webkit编译node-sqlite3"/>
<meta name="twitter:description" content="安装nodejs 本文nodejs版本0.10.31 下载node-webkit https://github.com/rogerwang/node-webkit#downloads If your native Node module works only with Node v0.10, then you should use node-webkit v0.8.x, which is also a maintained branch. 下载0.8.6版 安"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/evolution/" class="logo">ZEN</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/evolution/">
        <li class="mobile-menu-item">首页</li>
      </a><a href="/evolution/post/">
        <li class="mobile-menu-item">归档</li>
      </a><a href="/evolution/tags/">
        <li class="mobile-menu-item">标签</li>
      </a><a href="/evolution/categories/">
        <li class="mobile-menu-item">分类</li>
      </a><a href="/evolution/about/">
        <li class="mobile-menu-item">关于</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/evolution/" class="logo">ZEN</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/evolution/">首页</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/evolution/post/">归档</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/evolution/tags/">标签</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/evolution/categories/">分类</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/evolution/about/">关于</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">在win8.1中为node-webkit编译node-sqlite3</h1>

      <div class="post-meta">
        <span class="post-time"> 2014-09-06 </span>
        
        <span class="more-meta"> 约 652 字 </span>
        <span class="more-meta"> 预计阅读 2 分钟 </span>
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#安装nodejs">安装nodejs</a></li>
<li><a href="#下载node-webkit">下载node-webkit</a></li>
<li><a href="#安装nw-gyp">安装nw-gyp</a></li>
<li><a href="#安装编译node-sqlite3-这是从已经安装的代码再次编译">安装编译node-sqlite3，这是从已经安装的代码再次编译</a></li>
<li><a href="#直接从源编译安装-这个更方便">直接从源编译安装，这个更方便</a></li>
<li><a href="#在fedora-21下编译时出错解决方法">在Fedora 21下编译时出错解决方法</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      

<h3 id="安装nodejs">安装nodejs</h3>

<p>本文nodejs版本0.10.31</p>

<h3 id="下载node-webkit">下载node-webkit</h3>

<p><a href="https://github.com/rogerwang/node-webkit#downloads">https://github.com/rogerwang/node-webkit#downloads</a></p>

<blockquote>
<p>If your native Node module works only with Node v0.10, then you should use node-webkit v0.8.x, which is also a maintained branch.</p>
</blockquote>

<p>下载<a href="http://dl.node-webkit.org/v0.8.6/node-webkit-v0.8.6-win-ia32.zip">0.8.6</a>版</p>

<h3 id="安装nw-gyp">安装nw-gyp</h3>

<pre><code class="language-bash">npm install -g nw-gyp
nw-gyp -v

# v0.12.2
nw-gyp configure --target=0.8.6
nw-gyp build
</code></pre>

<p>在Windows下使用nw-gyp编译时需安装的<a href="https://github.com/rogerwang/nw-gyp#installation">依赖</a></p>

<ul>
<li>Python <a href="http://www.python.org/download/releases/2.7.3#download">v2.7.3</a></li>
<li>Visual Studio C++ 2012 (<a href="http://go.microsoft.com/?linkid=9816758">Express</a> version works well)</li>
</ul>

<p>使用nw-gyp编译本地模块
<a href="https://github.com/rogerwang/node-webkit/wiki/Build-native-modules-with-nw-gyp">https://github.com/rogerwang/node-webkit/wiki/Build-native-modules-with-nw-gyp</a></p>

<blockquote>
<p>For some packages you may need to use node-pre-gyp (e.g. when you get the error &ldquo;Undefined variable module_name in binding.gyp while trying to load binding.gyp&rdquo;), which supports building for both node.js and node-webkit by using either node-gyp or nw-gyp.</p>
</blockquote>

<pre><code class="language-bash">npm install -g node-pre-gyp
node-pre-gyp -v

# v0.5.22
</code></pre>

<h3 id="安装编译node-sqlite3-这是从已经安装的代码再次编译">安装编译node-sqlite3，这是从已经安装的代码再次编译</h3>

<pre><code class="language-bash">npm install sqlite3 --save
cd node_modules/sqlite3
node-pre-gyp build --runtime=node-webkit --target=0.8.6
</code></pre>

<h3 id="直接从源编译安装-这个更方便">直接从源编译安装，这个更方便</h3>

<p><a href="https://github.com/mapbox/node-sqlite3#building-for-node-webkit">https://github.com/mapbox/node-sqlite3#building-for-node-webkit</a></p>

<pre><code class="language-bash">npm install sqlite3 --build-from-source --runtime=node-webkit --target_arch=ia32 --target=0.8.6
</code></pre>

<p><strong>安装完成后将node_modules\sqlite3\lib\binding\node-webkit-v0.8.6-win32-ia32
重命名为node-webkit-v11-win32-ia32</strong></p>

<p>如果同时安装了VS2012和VS2013，则会有两套msbuild.exe，直接编译时会有问题，会使用v120版</p>

<blockquote>
<p>C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\V120\Microsoft.Cpp.Platform.targets(64,5): error MSB8020: The build tools for Visual Studio 2010 (Platform Toolset = &lsquo;v100&rsquo;) cannot be found. To build using the v100 build tools, please install Visual Studio 2010 build tools. Alternatively, you may upgrade to the current Visual Studio tools by selecting the Project menu or right-click the solution, and then selecting &ldquo;Upgrade Solution&hellip;&rdquo;. [:\WebApp\octoo\app\node_modules\sqlite3\build\deps\action_before_build.vcxproj]</p>
</blockquote>

<p><a href="http://stackoverflow.com/questions/10280956/how-to-use-msbuild-to-target-v110-platform-toolset">原因</a>，解决方法参考 <a href="https://github.com/Automattic/socket.io/issues/1151">https://github.com/Automattic/socket.io/issues/1151</a></p>

<p>即在命令中添加参数<code>--msvs_version=2012</code>，例如：<code>npm install sqlite3 --msvs_version=2012</code></p>

<h3 id="在fedora-21下编译时出错解决方法">在Fedora 21下编译时出错解决方法</h3>

<blockquote>
<p><a href="https://github.com/TooTallNate/node-gyp/issues/363#issuecomment-33212812">AttributeError: &lsquo;module&rsquo; object has no attribute &lsquo;script_main&rsquo;</a></p>
</blockquote>

<p>解决方法，在命令行输入</p>

<pre><code class="language-bash">$ python -c 'import gyp; print gyp.__file__'
</code></pre>

<p>返回</p>

<pre><code class="language-text">/usr/lib/python2.7/site-packages/gyp/__init__.pyc
</code></pre>

<p>移除或重命名这个目录(/usr/lib/python2.7/site-packages/gyp)，让找不到即可</p>

<hr />

<p>2015/03/25 Update</p>

<pre><code class="language-bash">## node = 0.12.0
## nw = 0.12.0

npm install -g node-pre-gyp nw-gyp

npm install sqlite3 --build-from-source --runtime=node-webkit --target_arch=ia32 --target=0.12.0  --msvs_version=2012 --save

## sqlite3/lib/binding/node-webkit-v0.12.0-win32-ia32/

npm install sqlite3 --build-from-source --runtime=node-webkit --target_arch=ia32 --target=0.12.0 --save

## sqlite3/lib/binding/node-webkit-v0.12.0-linux-ia32/

## node-sqlite3 = 3.0.5
</code></pre>

    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">夏末</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">2014-09-06</span>
  </p>
  
  
</div>

    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/evolution/wechatpay.png">
        <span>微信打赏</span>
      </label>
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/evolution/alipay5.png">
        <span>支付宝打赏</span>
      </label>
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/evolution/tags/node-sqlite3/">node-sqlite3</a>
          
          <a href="/evolution/tags/node-webkit/">node-webkit</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/evolution/post/2014/0907.npm%E4%B8%ADdependencies%E7%9A%84%E7%89%88%E6%9C%AC%E5%8C%BA%E9%97%B4/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">npm中dependencies的版本区间</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/evolution/post/2014/0723.editorconfig%E9%85%8D%E7%BD%AE/">
            <span class="next-text nav-default">EditorConfig配置</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  

  <div id="gitalk-container"></div>
  <link rel="stylesheet" href="/evolution/lib/gitalk/gitalk-1.2.2.min.css">
    <script src="/evolution/lib/gitalk/gitalk-1.2.2.min.js"></script>
  <script type="text/javascript">
  var gitalk = new Gitalk({
    id: '2014-09-06 18:34:48 \x2b0800 CST',
    title: '在win8.1中为node-webkit编译node-sqlite3',
    clientID: '2259f39afdd451aa1223',
    clientSecret: '64eaa58031a8b3360547a4dc69c9923d99bcce01',
    repo: 'git@github.com:mfkddcwy\/zen-comments.git',
    owner: 'mfkddcwy',
    admin: ['mfkddcwy'],
    body: decodeURI(location.href)
  });
  gitalk.render('gitalk-container');
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://github.com/gitalk/gitalk">comments powered by gitalk.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="http://weibo.com/zxppc" class="iconfont icon-weibo" title="weibo"></a>
  <a href="https://cethink.gitee.io/evolution/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    
      2014 - 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">冒牌天神</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/evolution/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/evolution/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/evolution/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/evolution/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/evolution/dist/even.min.js?v=3.2.0"></script>
  <script type="text/javascript">
    window.MathJax = {
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>








</body>
</html>
